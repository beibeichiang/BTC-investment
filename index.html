<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å½“å‰å‘¨æœŸ â€œé”šä¸å¸†â€ å®æˆ˜æ¨¡æ‹Ÿå™¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #030712;
            color: #d1d5db;
        }
        .card {
            background-color: #111827;
            border-radius: 0.75rem;
            padding: 1.5rem;
            border: 1px solid #374151;
        }
        .input-group {
            background-color: #1f2937;
            padding: 1rem;
            border-radius: 0.5rem;
            border: 1px solid #4b5563;
        }
        input[type="number"] {
            background-color: #374151;
            border: 1px solid #6b7280;
            color: #f3f4f6;
        }
        .btn {
            background-color: #2563eb;
            transition: background-color 0.3s;
        }
        .btn:hover {
            background-color: #1d4ed8;
        }
        .phase-card {
            background-color: #1f2937;
            padding: 1.25rem;
            border-radius: 0.5rem;
            border-left: 4px solid #3b82f6;
        }
        .summary-card {
             background-color: #1f2937;
            border: 1px solid #f59e0b;
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="max-w-7xl mx-auto space-y-8">
        <header class="text-center space-y-2">
            <h1 class="text-3xl md:text-4xl font-bold text-white">å½“å‰å‘¨æœŸ â€œé”šä¸å¸†â€ å®æˆ˜æ¨¡æ‹Ÿå™¨</h1>
            <p class="text-lg text-gray-400">åŸºäºæ‚¨çš„çœŸå®æŒä»“ï¼Œæ¨æ¼”æœ¬å‘¨æœŸè´¢å¯Œå¢é•¿</p>
        </header>

        <div class="card">
             <h2 class="text-xl font-semibold text-white mb-4">å½“å‰å‘¨æœŸç­–ç•¥æ ¸å¿ƒ</h2>
             <p class="text-sm text-gray-400 leading-relaxed">
                æœ¬æ¨¡æ‹Ÿå™¨åŸºäºæ‚¨çš„<strong class="text-amber-400">å½“å‰å®é™…æŒä»“</strong>è¿›è¡Œæ¼”ç®—ï¼Œå¹¶ä¸¥æ ¼éµå®ˆæ‚¨ä¸ºæœ¬å‘¨æœŸåˆ¶å®šçš„ç­–ç•¥ï¼š<br>
                <strong class="text-blue-400">âš“ é”š (æ ¸å¿ƒBTCä»“ä½)</strong>: æ‚¨æŒæœ‰çš„å…¨éƒ¨BTCï¼Œåœ¨æœ¬è½®ç‰›å¸‚é¡¶éƒ¨<strong class="text-amber-400">æ°¸ä¸å–å‡º</strong>ã€‚<br>
                <strong class="text-green-400">â›µ å¸† (å±±å¯¨å¸ä»“ä½)</strong>: æ‚¨æŒæœ‰çš„å…¨éƒ¨å±±å¯¨å¸ (ETH, STETH, ADA)ï¼Œåœ¨ç‰›å¸‚é¡¶éƒ¨<strong class="text-amber-400">å…¨éƒ¨å–å‡ºä¸ºUSDT</strong>ï¼Œä»¥æ¢å–æœ€å¤§åŒ–çš„å¼¹è¯ã€‚
             </p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- å·¦ä¾§ï¼šå‚æ•°è¾“å…¥ -->
            <div class="lg:col-span-1 space-y-6">
                <div class="card sticky top-8">
                    <h2 class="text-xl font-semibold text-white mb-4">å‚æ•°è¾“å…¥</h2>
                    <div class="space-y-4">
                        <div class="input-group">
                            <h3 class="text-sm font-medium text-gray-300 mb-2"><strong>èµ·ç‚¹:</strong> å½“å‰æŒä»“ (å¯ç¼–è¾‘)</h3>
                            <label for="currentBtc" class="block text-xs mt-2">BTC (é”š âš“)</label>
                            <input type="number" id="currentBtc" value="0.0871" class="w-full mt-1 p-2 rounded-md">
                            
                            <label for="currentEth" class="block text-xs mt-2">ETH + STETH (å¸† â›µ)</label>
                            <input type="number" id="currentEth" value="6.8145" class="w-full mt-1 p-2 rounded-md">
                            
                            <label for="currentAda" class="block text-xs mt-2">ADA (å¸† â›µ)</label>
                            <input type="number" id="currentAda" value="24034.3" class="w-full mt-1 p-2 rounded-md">
                        </div>

                        <div class="input-group">
                             <h3 class="text-sm font-medium text-gray-300 mb-2"><strong>å†å²å‘¨æœŸå‚è€ƒ:</strong> ä¸Šä¸€è½®ç‰›é¡¶</h3>
                             <label for="previousBullBtcPrice" class="block text-xs mt-2">2021å¹´ BTC ç‰›é¡¶ä»·æ ¼ (USD)</label>
                             <input type="number" id="previousBullBtcPrice" value="69000" class="w-full mt-1 p-2 rounded-md">
                        </div>

                        <div class="input-group">
                            <h3 class="text-sm font-medium text-gray-300 mb-2"><strong>æ”¶è·æœŸ:</strong> ç‰›å¸‚é¡¶éƒ¨ç›®æ ‡ä»· (USD)</h3>
                            <label for="bullBtcPrice" class="block text-xs mt-2">BTC ä»·æ ¼</label>
                            <input type="number" id="bullBtcPrice" value="150000" class="w-full mt-1 p-2 rounded-md">
                            <label for="bullEthPrice" class="block text-xs mt-2">ETH / STETH ä»·æ ¼</label>
                            <input type="number" id="bullEthPrice" value="8000" class="w-full mt-1 p-2 rounded-md">
                             <label for="bullAdaPrice" class="block text-xs mt-2">ADA ä»·æ ¼</label>
                            <input type="number" id="bullAdaPrice" value="5" class="w-full mt-1 p-2 rounded-md">
                        </div>

                        <div class="input-group">
                             <h3 class="text-sm font-medium text-gray-300 mb-2"><strong>é‡æ–°æ’­ç§:</strong> ä¸‹ä¸€è½®ç†Šåº•æŠ„åº•ä»· (USD)</h3>
                             <label for="bearBtcPrice2" class="block text-xs mt-2">BTC ä»·æ ¼ (é»˜è®¤å…³è”ä¸Šä¸€è½®ç‰›é¡¶)</label>
                             <input type="number" id="bearBtcPrice2" value="69000" class="w-full mt-1 p-2 rounded-md">
                        </div>
                    </div>
                    <button id="runBtn" class="w-full btn text-white font-bold py-3 px-4 rounded-lg text-lg mt-6">
                        ğŸš€ è¿è¡Œæœ¬å‘¨æœŸæ¨¡æ‹Ÿ
                    </button>
                </div>
            </div>

            <!-- å³ä¾§ï¼šæ¨¡æ‹Ÿç»“æœ -->
            <div class="lg:col-span-2 space-y-6">
                <div class="card">
                    <h2 class="text-xl font-semibold text-white mb-4 text-center">æœ¬å‘¨æœŸæ¼”ç®—æµç¨‹</h2>
                    <div id="results" class="space-y-6 text-gray-300">
                        <p class="text-center">è¯·åœ¨å·¦ä¾§è®¾å®šç‰›é¡¶ä¸ç†Šåº•çš„ç›®æ ‡ä»·ï¼Œç„¶åç‚¹å‡»â€œè¿è¡Œæ¨¡æ‹Ÿâ€ã€‚</p>
                    </div>
                </div>
                <div class="card">
                    <h2 class="text-xl font-semibold text-white mb-4 text-center">BTCæ€»èµ„äº§å¢é•¿å¯è§†åŒ–</h2>
                    <div class="h-64">
                         <canvas id="growthChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

<script>
    const elements = {
        currentBtc: document.getElementById('currentBtc'),
        currentEth: document.getElementById('currentEth'),
        currentAda: document.getElementById('currentAda'),
        previousBullBtcPrice: document.getElementById('previousBullBtcPrice'),
        bullBtcPrice: document.getElementById('bullBtcPrice'),
        bullEthPrice: document.getElementById('bullEthPrice'),
        bullAdaPrice: document.getElementById('bullAdaPrice'),
        bearBtcPrice2: document.getElementById('bearBtcPrice2'),
        runBtn: document.getElementById('runBtn'),
        results: document.getElementById('results'),
        chartCtx: document.getElementById('growthChart').getContext('2d'),
    };

    let growthChart;
    let currentPrices = {};

    function formatNum(num, decimals = 2) {
        if (typeof num !== 'number' || isNaN(num)) return '...';
        return new Intl.NumberFormat('en-US', {
            minimumFractionDigits: decimals,
            maximumFractionDigits: decimals
        }).format(num);
    }

    async function fetchPricesAndRun() {
        try {
            const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,cardano&vs_currencies=usd');
            if (!response.ok) throw new Error('API request failed');
            const data = await response.json();
            currentPrices = {
                btc: data.bitcoin.usd,
                eth: data.ethereum.usd,
                ada: data.cardano.usd,
            };
        } catch (error) {
            console.error("Price fetch failed:", error);
            elements.results.innerHTML = `<p class="text-center text-red-400">æ— æ³•è·å–å®æ—¶ä»·æ ¼ï¼Œè¯·ç¨åé‡è¯•ã€‚</p>`;
            return;
        }
        setBearBottomDefault();
        runSimulation();
    }
    
    function runSimulation() {
        // --- 1. è·å–è¾“å…¥å‚æ•° ---
        const bullBtcPrice = parseFloat(elements.bullBtcPrice.value) || 0;
        const bullEthPrice = parseFloat(elements.bullEthPrice.value) || 0;
        const bullAdaPrice = parseFloat(elements.bullAdaPrice.value) || 0;
        const bearBtcPrice2 = parseFloat(elements.bearBtcPrice2.value) || 0;
        
        // --- 2. æ’­ç§æœŸ (å½“å‰çŠ¶æ€) ---
        const anchorBtc = parseFloat(elements.currentBtc.value) || 0;
        const sailEth = parseFloat(elements.currentEth.value) || 0;
        const sailAda = parseFloat(elements.currentAda.value) || 0;
        
        // --- 2.1 èµ·ç‚¹å¯è§†åŒ–è®¡ç®— ---
        const currentValues = {
            btc: anchorBtc * currentPrices.btc,
            eth: sailEth * currentPrices.eth,
            ada: sailAda * currentPrices.ada,
        };
        const currentTotalValue = currentValues.btc + currentValues.eth + currentValues.ada;
        const currentBtcEquivalents = {
            btc: anchorBtc,
            eth: currentPrices.btc > 0 ? currentValues.eth / currentPrices.btc : 0,
            ada: currentPrices.btc > 0 ? currentValues.ada / currentPrices.btc : 0,
        };
        const currentTotalBtcEq = currentBtcEquivalents.btc + currentBtcEquivalents.eth + currentBtcEquivalents.ada;
        const currentPercentages = {
            btc: currentTotalValue > 0 ? (currentValues.btc / currentTotalValue) * 100 : 0,
            eth: currentTotalValue > 0 ? (currentValues.eth / currentTotalValue) * 100 : 0,
            ada: currentTotalValue > 0 ? (currentValues.ada / currentTotalValue) * 100 : 0,
        };
        
        const startPointHTML = `
            <div class="phase-card">
                <h3 class="font-bold text-lg text-blue-400 mb-2">1. èµ·ç‚¹ (å½“å‰æŒä»“)</h3>
                 <p class="text-xs text-gray-400 mb-1 mt-2">å½“å‰æ€»ä»·å€¼: <strong class="text-white">$${formatNum(currentTotalValue, 0)}</strong> (${formatNum(currentTotalBtcEq, 4)} BTC)</p>
                 <div class="w-full bg-gray-900 h-8 flex text-xs text-white rounded-md overflow-hidden mt-1">
                    <div style="width: ${currentPercentages.btc}%" class="bg-orange-500 flex items-center justify-center">âš“ BTC: ${currentPercentages.btc.toFixed(0)}%</div>
                    <div style="width: ${currentPercentages.eth}%" class="bg-purple-600 flex items-center justify-center">â›µ ETH: ${currentPercentages.eth.toFixed(0)}%</div>
                    <div style="width: ${currentPercentages.ada}%" class="bg-sky-500 flex items-center justify-center">â›µ ADA: ${currentPercentages.ada.toFixed(0)}%</div>
                </div>
                <div class="mt-3 space-y-2 text-xs border-t border-gray-700 pt-3">
                    <div class="grid grid-cols-4 gap-2 text-gray-400 font-semibold">
                        <div>èµ„äº§</div><div class="text-right">å æ¯”</div><div class="text-right">æ•°é‡/BTCç­‰é‡</div><div class="text-right">æ³•å¸ä»·å€¼</div>
                    </div>
                    <div class="grid grid-cols-4 gap-2 items-center"><div class="font-semibold">âš“ BTC</div><div class="text-right">${currentPercentages.btc.toFixed(1)}%</div><div class="text-right font-mono">${formatNum(anchorBtc, 4)} BTC</div><div class="text-right font-mono">$${formatNum(currentValues.btc, 0)}</div></div>
                    <div class="grid grid-cols-4 gap-2 items-center"><div class="font-semibold">â›µ ETH</div><div class="text-right">${currentPercentages.eth.toFixed(1)}%</div><div class="text-right font-mono">${formatNum(currentBtcEquivalents.eth, 4)} BTC</div><div class="text-right font-mono">$${formatNum(currentValues.eth, 0)}</div></div>
                    <div class="grid grid-cols-4 gap-2 items-center"><div class="font-semibold">â›µ ADA</div><div class="text-right">${currentPercentages.ada.toFixed(1)}%</div><div class="text-right font-mono">${formatNum(currentBtcEquivalents.ada, 4)} BTC</div><div class="text-right font-mono">$${formatNum(currentValues.ada, 0)}</div></div>
                </div>
            </div>`;

        // --- 3. æ”¶è·æœŸ (ç‰›å¸‚é¡¶éƒ¨) ---
        const anchorValueBull = anchorBtc * bullBtcPrice;
        const sailEthValueBull = sailEth * bullEthPrice;
        const sailAdaValueBull = sailAda * bullAdaPrice;
        const totalValueBull = anchorValueBull + sailEthValueBull + sailAdaValueBull;
        const harvestedUsdt = sailEthValueBull + sailAdaValueBull;
        const anchorPctBull = totalValueBull > 0 ? (anchorValueBull / totalValueBull) * 100 : 0;
        const sailEthPctBull = totalValueBull > 0 ? (sailEthValueBull / totalValueBull) * 100 : 0;
        const sailAdaPctBull = totalValueBull > 0 ? (sailAdaValueBull / totalValueBull) * 100 : 0;
        const anchorBtcEqBull = anchorBtc;
        const sailEthBtcEqBull = bullBtcPrice > 0 ? sailEthValueBull / bullBtcPrice : 0;
        const sailAdaBtcEqBull = bullBtcPrice > 0 ? sailAdaValueBull / bullBtcPrice : 0;

        // --- 4. é‡æ–°æ’­ç§ (ä¸‹ä¸€è½®ç†Šå¸‚åº•éƒ¨) ---
        const newBtcFromSail = bearBtcPrice2 > 0 ? harvestedUsdt / bearBtcPrice2 : 0;
        const finalTotalBtc = anchorBtc + newBtcFromSail;
        const anchorFinalPct = finalTotalBtc > 0 ? (anchorBtc / finalTotalBtc * 100) : 0;
        const newSailFinalPct = finalTotalBtc > 0 ? (newBtcFromSail / finalTotalBtc * 100) : 0;
        
        // --- 5. æ¸²æŸ“ç»“æœ ---
        elements.results.innerHTML = `
            ${startPointHTML}
            <div class="text-center text-gray-500 text-2xl">â†“</div>

            <div class="phase-card border-l-red-500">
                <h3 class="font-bold text-lg text-red-400 mb-2">2. æ”¶è·æœŸ (ç‰›å¸‚é¡¶éƒ¨)</h3>
                <p class="text-xs text-gray-400 mb-1 mt-2">ç‰›é¡¶æ€»ä»·å€¼: <strong class="text-white">$${formatNum(totalValueBull, 0)}</strong> (${formatNum(anchorBtc + sailEthBtcEqBull + sailAdaBtcEqBull, 4)} BTC)</p>
                <div class="w-full bg-gray-900 h-8 flex text-xs text-white rounded-md overflow-hidden mt-1">
                    <div style="width: ${anchorPctBull}%" class="bg-orange-500 flex items-center justify-center">âš“ é”š (BTC): ${formatNum(anchorPctBull, 0)}%</div>
                    <div style="width: ${sailEthPctBull}%" class="bg-purple-600 flex items-center justify-center">â›µ å¸† (ETH): ${formatNum(sailEthPctBull, 0)}%</div>
                    <div style="width: ${sailAdaPctBull}%" class="bg-sky-500 flex items-center justify-center">â›µ å¸† (ADA): ${formatNum(sailAdaPctBull, 0)}%</div>
                </div>
                 <div class="mt-3 space-y-2 text-xs border-t border-gray-700 pt-3">
                    <div class="grid grid-cols-4 gap-2 text-gray-400 font-semibold">
                        <div>èµ„äº§</div><div class="text-right">å æ¯”</div><div class="text-right">BTCç­‰é‡</div><div class="text-right">æ³•å¸ä»·å€¼</div>
                    </div>
                    <div class="grid grid-cols-4 gap-2 items-center"><div class="font-semibold">âš“ é”š(BTC)</div><div class="text-right">${anchorPctBull.toFixed(1)}%</div><div class="text-right font-mono">${formatNum(anchorBtcEqBull, 4)} BTC</div><div class="text-right font-mono">$${formatNum(anchorValueBull, 0)}</div></div>
                    <div class="grid grid-cols-4 gap-2 items-center"><div class="font-semibold">â›µ å¸†(ETH)</div><div class="text-right">${sailEthPctBull.toFixed(1)}%</div><div class="text-right font-mono">${formatNum(sailEthBtcEqBull, 4)} BTC</div><div class="text-right font-mono">$${formatNum(sailEthValueBull, 0)}</div></div>
                    <div class="grid grid-cols-4 gap-2 items-center"><div class="font-semibold">â›µ å¸†(ADA)</div><div class="text-right">${sailAdaPctBull.toFixed(1)}%</div><div class="text-right font-mono">${formatNum(sailAdaBtcEqBull, 4)} BTC</div><div class="text-right font-mono">$${formatNum(sailAdaValueBull, 0)}</div></div>
                </div>
                <p class="mt-4 text-sm">â¡ï¸ ä¸¥æ ¼æ‰§è¡Œçºªå¾‹: <strong class="text-amber-400">â€œé”šâ€ä»“ä½ä¸åŠ¨</strong>, <strong class="text-amber-400">â€œå¸†â€ä»“ä½(ETH/ADA)å…¨éƒ¨å–å‡º</strong></p>
                <p class="font-semibold text-yellow-300">ğŸ’° æ”¶è·å¼¹è¯: ${formatNum(harvestedUsdt, 0)} USDT</p>
            </div>

            <div class="text-center text-gray-500 text-2xl">â†“</div>

            <div class="phase-card border-l-yellow-500">
                <h3 class="font-bold text-lg text-yellow-400 mb-2">3. é‡æ–°æ’­ç§ (ä¸‹ä¸€è½®ç†Šåº•)</h3>
                <p class="text-sm">â¡ï¸ å°†å…¨éƒ¨ ${formatNum(harvestedUsdt, 0)} USDT å¼¹è¯, åœ¨ BTC=$${formatNum(bearBtcPrice2, 0)} æ—¶ä¹°å…¥BTC</p>
                <p class="font-semibold text-green-300">â›µ â€œå¸†â€å¸¦å›: ${formatNum(newBtcFromSail, 4)} BTC</p>
                <div class="mt-3">
                    <p class="text-xs text-gray-400 mb-1 mt-2">ç†Šåº•æ€»ä»“ä½æ„æˆ (æ€»ä»·å€¼: <strong class="text-white">$${formatNum(finalTotalBtc * bearBtcPrice2, 0)}</strong> | æ€»BTCé‡: <strong class="text-white">${formatNum(finalTotalBtc, 4)} BTC</strong>)</p>
                    <div class="w-full bg-gray-900 h-8 flex text-xs text-white rounded-md overflow-hidden mt-1">
                        <div style="width: ${anchorFinalPct}%" class="bg-orange-500 flex items-center justify-center">âš“ é”š: ${anchorFinalPct.toFixed(0)}%</div>
                        <div style="width: ${newSailFinalPct}%" class="bg-green-500 flex items-center justify-center">â›µ å¸†(æ–°): ${newSailFinalPct.toFixed(0)}%</div>
                   </div>
                   <div class="mt-3 space-y-2 text-xs border-t border-gray-700 pt-3">
                    <div class="grid grid-cols-4 gap-2 text-gray-400 font-semibold">
                        <div>èµ„äº§æ„æˆ</div><div class="text-right">å æ¯”</div><div class="text-right">BTCæ•°é‡</div><div class="text-right">æ³•å¸ä»·å€¼</div>
                    </div>
                    <div class="grid grid-cols-4 gap-2 items-center"><div class="font-semibold">âš“ é”š(åŸå§‹)</div><div class="text-right">${anchorFinalPct.toFixed(1)}%</div><div class="text-right font-mono">${formatNum(anchorBtc, 4)} BTC</div><div class="text-right font-mono">$${formatNum(anchorBtc * bearBtcPrice2, 0)}</div></div>
                    <div class="grid grid-cols-4 gap-2 items-center"><div class="font-semibold">â›µ å¸†(æ–°è·)</div><div class="text-right">${newSailFinalPct.toFixed(1)}%</div><div class="text-right font-mono">${formatNum(newBtcFromSail, 4)} BTC</div><div class="text-right font-mono">$${formatNum(newBtcFromSail * bearBtcPrice2, 0)}</div></div>
                   </div>
                </div>
            </div>
            
            <hr class="border-gray-600 my-4">

            <div class="summary-card p-4 rounded-lg">
                <h3 class="font-bold text-xl text-amber-400 mb-3 text-center">ğŸ† æœ¬å‘¨æœŸæ€»ç»“ä¸ä¸‹ä¸€è½®èµ·ç‚¹ ğŸ†</h3>
                <div class="space-y-3 text-center">
                    <p><strong>æœ¬å‘¨æœŸâ€œé”šâ€ä»“ä½ (æœªåŠ¨):</strong> ${formatNum(anchorBtc, 4)} BTC</p>
                    <p><strong>æœ¬å‘¨æœŸâ€œå¸†â€å¸¦å›ä»“ä½:</strong> ${formatNum(newBtcFromSail, 4)} BTC</p>
                    <p class="text-2xl font-bold text-white"><strong>ä¸‹ä¸€å‘¨æœŸèµ·ç‚¹æ€»èµ„äº§: ${formatNum(finalTotalBtc, 4)} BTC</strong></p>
                    <p class="pt-3 text-sm">ä¸‹ä¸€è½®è¿œèˆªï¼Œæ‚¨å¯ä»¥å°†è¿™ ${formatNum(finalTotalBtc, 4)} BTC ä½œä¸ºèµ·ç‚¹, å†æ¬¡æŒ‰ 50/50 åˆ†é…ç»™æ–°çš„â€œé”šâ€ä¸â€œå¸†â€ã€‚</p>
                </div>
            </div>
        `;

        const initialSailBtcEq = currentBtcEquivalents.eth + currentBtcEquivalents.ada;
        renderChart({
            anchor: anchorBtc,
            initialSail: initialSailBtcEq,
            newSail: newBtcFromSail
        });
    }

    function renderChart(data) {
        if (growthChart) {
            growthChart.destroy();
        }
        growthChart = new Chart(elements.chartCtx, {
            type: 'bar',
            data: {
                labels: ['å‘¨æœŸèµ·ç‚¹æ€»BTC', 'ä¸‹ä¸€å‘¨æœŸæ€»BTC'],
                datasets: [
                    {
                        label: 'é”š âš“ (æ ¸å¿ƒä»“ä½)',
                        data: [data.anchor, data.anchor],
                        backgroundColor: '#ea580c',
                        borderColor: '#c2410c',
                        borderWidth: 1,
                        stack: 'Stack 0',
                    },
                     {
                        label: 'å¸† â›µ (å‘¨æœŸå˜åŒ–)',
                        data: [data.initialSail, data.newSail],
                        backgroundColor: '#16a34a',
                        borderColor: '#15803d',
                        borderWidth: 1,
                        stack: 'Stack 0',
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top',
                        labels: { color: '#d1d5db' }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.parsed.y !== null) {
                                    label += formatNum(context.parsed.y, 4) + ' BTC';
                                }
                                return label;
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        ticks: { color: '#d1d5db' },
                        grid: { color: '#374151' }
                    },
                    y: {
                        stacked: true,
                        beginAtZero: true,
                        ticks: { color: '#d1d5db' },
                        grid: { color: '#374151' },
                        title: {
                            display: true,
                            text: 'BTC æ•°é‡',
                            color: '#d1d5db'
                        }
                    }
                }
            }
        });
    }

    function setBearBottomDefault() {
        elements.bearBtcPrice2.value = elements.previousBullBtcPrice.value;
    }
    
    elements.previousBullBtcPrice.addEventListener('input', setBearBottomDefault);
    elements.runBtn.addEventListener('click', runSimulation);
    window.addEventListener('load', fetchPricesAndRun);

</script>
</body>
</html>

